# LMS 플랫폼 요구사항 명세서

AI 영상 제작 교육을 위한 학습 관리 시스템

---

## 1. 프로젝트 개요

**프로젝트명**: AI 영상 제작 LMS 플랫폼  
**대상**: AI 영상 제작을 배우는 학생들 (30명 예상)  
**콘텐츠**: 12주차 × 3회차 = 36개 수업  
**핵심 특징**: GPT 기반 프롬프트 평가, 퀴즈 피드백, 제출물 관리

---

## 2. 기술 스택

| 구분 | 기술 |
|------|------|
| **프론트엔드** | Next.js 14 (App Router), TypeScript, TailwindCSS |
| **상태관리** | Zustand (클라이언트), React Query (서버) |
| **UI 컴포넌트** | shadcn/ui |
| **백엔드** | Firebase (Auth, Firestore, Storage, Functions) |
| **AI** | OpenAI GPT-4 API |
| **분석** | Google Analytics 4 |
| **임베딩** | Notion Embed |

---

## 3. 프로젝트 구조

```
📁 프로젝트 루트/
├── 📁 app/                        # Next.js 페이지 (UI 라우팅)
│   ├── 📁 (student)/               # 학생용 그룹 (사이드바 자동 적용)
│   │   ├── 📁 home/                →  /home
│   │   ├── 📁 learning/            →  /learning (내 학습 현황)
│   │   ├── 📁 lesson/              →  /lesson/[id] (수업 상세)
│   │   ├── 📁 practice/            →  /practice (실습)
│   │   ├── 📁 quiz/                →  /quiz
│   │   ├── 📁 calendar/            →  /calendar
│   │   └── 📁 notice/              →  /notice
│   ├── 📁 (instructor)/            # 강사용 그룹 (관리자 메뉴 자동 적용)
│   │   └── 📁 admin/               →  /admin
│   └── 📁 login/                   →  /login (공용, 메뉴 없음)
│
├── 📁 components/                  # UI 컴포넌트
│   ├── 📁 common/                  # 공용 (Button, Modal 등)
│   ├── 📁 student/                 # 학생용 (Sidebar, QuizCard 등)
│   └── 📁 instructor/              # 강사용 (AdminMenu, StatsCard 등)
│
├── 📁 hooks/                       # React Query hooks (데이터 fetch)
│   ├── useAuth.ts                  # 인증 관련
│   ├── useProgress.ts              # 진도율 관련
│   ├── useQuiz.ts                  # 퀴즈 관련
│   └── useSubmission.ts            # 제출물 관련
│
├── 📁 services/                    # 비즈니스 로직 (순수 함수)
│   ├── authService.ts              # 인증/인가 로직
│   ├── quizService.ts              # 퀴즈 채점 로직
│   ├── gptService.ts               # OpenAI API 호출
│   └── submissionService.ts        # 파일 업로드 로직
│
├── 📁 lib/                         # 설정 및 유틸
│   ├── firebase.ts                 # Firebase 초기화
│   └── utils.ts                    # 공용 유틸 함수
│
├── 📁 types/                       # TypeScript 타입 정의
│   └── index.ts
│
├── 📁 constants/                   # 상수
│   └── config.ts                   # 설정값 (라우트, 기본값 등)
│
├── middleware.ts                   # Next.js Middleware (라우트 보안)
├── package.json
├── tsconfig.json
└── tailwind.config.ts
```

### 폴더 역할 정리

| 폴더 | 역할 | 예시 |
|------|------|------|
| **app/** | 페이지 라우팅, UI 진입점 | `/home` 화면 |
| **components/** | 화면에 보이는 UI 조각 | 버튼, 카드, 사이드바 |
| **hooks/** | 데이터 가져오기 + 캐싱 | Firebase에서 진도율 조회 |
| **services/** | 비즈니스 로직 (데이터 가공) | 퀴즈 채점, GPT 호출 |
| **lib/** | 설정, 유틸리티 | Firebase 연결 설정 |
| **types/** | 타입 정의 | User, Quiz, Submission 등 |
| **constants/** | 상수 값 | ROUTES, COLORS 등 |

### 계층 분리 원칙

| 계층 | 역할 | Firebase 변경 시 | 퀴즈 로직 변경 시 | UI 변경 시 |
|------|------|-----------------|------------------|-----------|
| **Data** (Firestore) | 원시 데이터 저장 | - | - | - |
| **Service** | 비즈니스 로직 | 수정 | 수정 | - |
| **Hook** | 데이터 동기화 | 수정 | - | - |
| **Component** | UI 렌더링 | - | - | 수정 |

---

## 4. 사용자 역할

### 사용자 인증 흐름

**사전 등록 시스템**
- 강사 이메일 목록과 학생 이메일 목록을 사전에 별도 관리
- Google 로그인 시 이메일로 역할 자동 판별
- 등록되지 않은 이메일로 로그인 시 접근 거부

**로그인 후 리다이렉션**
| 이메일 유형 | 이동 페이지 |
|------------|------------|
| 강사 이메일 목록에 있음 | `/instructor/dashboard` (강사 대시보드) |
| 학생 이메일 목록에 있음 | `/student/dashboard` (학생 대시보드) |
| 미등록 이메일 | 접근 불가 안내 페이지 |

**권한 체크 (Middleware 기반)**
- Next.js Middleware를 통해 페이지 접근 전 인가 처리
- `/instructor/*` 경로: 강사 이메일 목록 확인, 미일치 시 리다이렉트
- `/student/*` 경로: 학생 이메일 목록 확인, 미일치 시 리다이렉트
- 미등록 이메일: `/unauthorized` 페이지로 리다이렉트
- Middleware 위치: 프로젝트 루트 `middleware.ts`

**인증 → 인가 흐름**
1. Google 로그인 (Firebase Auth)
2. 이메일로 역할 확인 (강사/학생 목록 조회)
3. 역할에 맞는 대시보드로 리다이렉트
4. 이후 모든 페이지 접근 시 Middleware에서 재확인


---

## 4. 화면 정의

### 학생용 화면 구조

**레이아웃**
- 좌측 고정 사이드바 + 우측 메인 컨텐츠 영역
- 상단: 사용자 프로필 (이름, 이메일), 로그아웃 버튼

**사이드바 메뉴 및 페이지 타입**
| 메뉴 | 타입 | 설명 |
|------|------|------|
| **홈** | Notion 임베딩 | 과정 소개 페이지 |
| **내 학습 현황** | 커스텀 개발 | 주차별 학습 진행 상태, 완료/미완료 표시 |
| **캘린더** | Notion 임베딩 | Notion 캘린더 뷰 |
| **실습** | 커스텀 개발 | 프롬프트 실습, 제출물 업로드, 실습 히스토리 |
| **퀴즈** | 커스텀 개발 | 퀴즈 목록, 응시 현황, 재응시 가능한 퀴즈 |
| **공지사항** | Notion 임베딩 | 강사 공지, 업데이트 내용 |

**홈 화면**
- 좌측: 사이드바
- 우측: Notion 페이지 임베딩

**캘린더 화면**
- 좌측: 사이드바
- 우측: Notion 캘린더 임베딩

**공지사항 화면**
- 좌측: 사이드바
- 우측: Notion 페이지 임베딩

### 학생용 페이지 상세

| 페이지 | URL | 설명 |
|--------|-----|------|
| **로그인** | `/login` | Google 로그인, 이메일 확인 후 리다이렉트 |
| **홈** | `/student/home` | 과정 소개, 진도율, 다음 수업 안내 |
| **주차 목록** | `/student/learning` | 12주차 목록, 각 주차 완료 상태 |
| **수업 상세** | `/student/lesson/[id]` | 노션 임베딩, 진도율 자동 체크 |
| **실습** | `/student/practice` | 프롬프트 실습 목록, 제출물 업로드 |

**실습 화면**
- 실습 목록 (실습 1~12, 상태: 미완료/완료)
- 실습 상세 페이지:
  - 실습 번호 (예: "실습 3")
  - 과정명: "생성형 AI 콘텐츠 크리에이터 스타터 과정"
  - 회차 정보 (예: "3주차 3회차 실습")
  - 연습 미션 제목
  - 미션 내용 설명
  - 프롬프트 입력 영역: "아래의 프롬프트를 작성하여 결과물을 제출해주세요."
  - "프롬프트 제출" 버튼
  - 제출 후 GPT 평가 결과 표시:
    - 점수 (예: 85/100)
    - 피드백 텍스트
    - 개선 제안
  - 재시도 버튼 (원하면 다시 제출 가능)

**파일 제출 화면 (실습 제출)**
- 제출 정보:
  - "과정 과제물 제출"
  - 회차 정보 (예: "3주차 3회차 실습")
  - 마감일 표시 (설정된 경우)
  - **마감일 초과 시**: "제출기한이 지났습니다" 경고 표시 (제출은 가능)
- 파일 업로드 영역:
  - "과제를 업로드해주세요"
  - 드래그 앤 드롭 또는 클릭으로 파일 선택
  - ZIP 파일만 허용 (5GB 이하)
  - 업로드 진행률 표시
- "제출하기" 버튼
- 제출 상태: **제출완료 / 미제출 / 지각제출**
- **강사 코멘트**: 학생이 제출물 상세에서 강사 코멘트 확인 가능 (채점 없음)
**퀴즈 화면**
- 퀴즈 목록 (퀴즈 1~12, 상태: 미응시/응시완료/재응시가능)
- 퀴즈 응시 페이지:
  - 퀴즈 번호 표시 (예: "퀴즈 5")
  - 유형 표시: "객관식 - 주관식"
  - 과정명 표시: "생성형 AI 콘텐츠 크리에이터 스타터 과정"
  - 문제 번호 및 질문 (예: "1. Midjourney와 Leonardo AI의 차이점은 무엇인가요?")
  - 객관식: 보기 중 선택
  - 주관식: 텍스트 입력
  - 정답 제출 후 GPT 채점 및 피드백 표시
  - 오답 시: GPT 해설 제공 → 재응시 가능
  - 정답 시: 다음 문제 또는 완료
**캘린더 화면**
- 좌측: 사이드바
- 우측: Notion 캘린더 임베딩 (주차별 일정, 퀴즈 응시일 등)

| **공지사항** | `/student/notice` | Notion 페이지 임베딩 |
| **나의 히스토리** | `/student/history` | 제출물, 퀴즈 결과, 프롬프트 기록 |

---

## 5. 강사용 관리자 페이지

**접근**: 강사 이메일로 로그인 시 `/instructor/admin`으로 이동

**데이터 관리**
| 기능 | 설명 |
|------|------|
| **퀴즈 관리** | 퀴즈 문제 등록/수정/삭제 (객관식/주관식, 정답, 해설 설정) |
| **실습 관리** | 실습 미션 등록/수정 (제목, 설명, **제출 마감일(선택)**) |
| **GPT 설정** | 프롬프트 평가 기준, 퀴즈 채점 기준 설정 |
| **과정 설정** | 시작 날짜 설정, 노션 페이지 ID 설정 |

**알림/공지**
| 기능 | 설명 |
|------|------|
| **공지사항 관리** | Notion 페이지 연동, 공지 작성 시 학생들에게 이메일 발송 |
| **이메일 알림** | 강사 코멘트 작성 시 학생에게 이메일 발송, 공지사항 등록 시 전체 학생에게 이메일 발송 |
| **알림 이력** | 발송된 이메일 내역 확인 |

**통계 대시보드**
| 기능 | 설명 |
|------|------|
| **전체 진도율** | 학생별/주차별 완료 현황 요약 |
| **퀴즈 통계** | 퀴즈 응시율, 정답률, 평균 시도 횟수 |
| **실습 통계** | 실습 제출 완료율, **지각 제출 현황** |
| **학생 현황** | 개별 학생 진도 조회 (수업/실습/퀴즈 완료 여부, **실습 제출 상태 확인(제출완료/미제출/지각제출)**, **제출물 코멘트 작성**) |

---

## 6. 핵심 기능 목록 (학생용)

### 학생 기능
| 기능 | 설명 |
|------|------|
| **로그인** | Firebase Auth (이메일/비밀번호 또는 소셜) |
| **대시보드** | 전체 과정 진도율, 다음 수업 안내 |
| **주차 목록** | 12주차 목록, 각 주차 완료 상태 |
| **수업 학습** | 노션 페이지 임베딩, 진도율 자동 체크 (80% 스크롤 시 완료) |
| **프롬프트 실습** | 프롬프트 입력 → GPT-4 평가/피드백/개선 제안 → 재시도 가능 |
| **퀴즈** | 객관식(자동 채점) + 주관식(GPT 채점/피드백), 틀리면 해설 → 맞출 때까지 재시도 |
| **제출물 업로드** | ZIP 파일 업로드 (5GB 이하), 진행률 표시, 완료 표시 |
| **나의 히스토리** | 본인 제출물 목록, 퀴즈 결과, 프롬프트 기록 조회 |

### 강사 기능
| 기능 | 설명 |
|------|------|
| **강사 대시보드** | 전체 학생 진도율 요약 |
| **학생 관리** | 학생별 학습 현황 (수업 완료/퀴즈/제출물) |
| **제출물 관리** | 학생별 제출물 조회, ZIP 다운로드 |
| **퀴즈 현황** | 퀴즈 응시율, 평균 점수 통계 |

### 데이터 저장 (개발 시 결정)
- **저장 대상**: 유저 정보, 수업 정보, 진도율, 퀴즈 응시 기록, 프롬프트 제출, 파일 제출
- **권한**: 학생은 본인 데이터만, 강사는 전체 학생 데이터 조회 가능
- **Storage**: 제출물 ZIP 파일 저장

---

## 7. 외부 연동

### Google Analytics 4
- 페이지 뷰 추적
- 학습 완료율 (커스텀 이벤트)
- 퀴즈 응시율
- 프롬프트 실습 참여율
- 제출물 업로드 성공률

### OpenAI API
- 프롬프트 평가
- 주관식 퀴즈 채점
- 오답 피드백 생성

---

## 8. 보안 및 권한

### Firestore Security Rules
- 학생: 본인 데이터만 읽기/쓰기
- 강사: 전체 학생 데이터 읽기 가능
- 인증되지 않은 사용자: 접근 불가

### Storage Rules
- 학생: 본인 제출물만 업로드/조회
- 강사: 모든 제출물 다운로드 가능

---

## 9. MVP 범위 (1차 개발)

- [ ] 학생 로그인/회원가입
- [ ] 노션 임베딩 + 진도율 체크
- [ ] 프롬프트 실습 (GPT 평가)
- [ ] 퀴즈 시스템 (GPT 채점)
- [ ] 제출물 업로드 (ZIP)
- [ ] 학생 히스토리 조회
- [ ] 강사 대시보드 (기본 통계)

---

## 10. 개발 단계

### Phase 1: 기반 설정 (1-2일)
- Next.js 프로젝트 초기화
- Firebase 설정 (Auth, Firestore, Storage)
- shadcn/ui 설정
- 기본 레이아웃 (사이드바)

### Phase 2: 인증/인가 (2-3일)
- Google 로그인
- 이메일 목록 기반 역할 분리
- Middleware 라우트 보안

### Phase 3: 학생용 핵심 기능 (5-7일)
- 홈, 캘린더, 공지사항 (Notion 임베딩)
- 내 학습 현황 (주차별 진도)
- 수업 상세 (Notion 임베딩)
- 프롬프트 실습 (GPT 연동)
- 퀴즈 (GPT 채점)
- 파일 제출 (ZIP)

### Phase 4: 강사용 관리자 (3-4일)
- 퀴즈/실습 관리
- 과정 설정 (시작 날짜, 노션 페이지)
- 통계 대시보드

### Phase 5: 알림/마무리 (2-3일)
- 이메일 알림 (SendGrid 또는 Firebase Functions)
- 코멘트 기능
- GA 연동

**총 예상 기간: 2-3주**

---

## 11. MVP 범위 (1차 개발)

- [ ] 학생 로그인/회원가입
- [ ] 노션 임베딩 (홈, 캘린더, 공지사항, 수업)
- [ ] 내 학습 현황 (주차별 진도)
- [ ] 프롬프트 실습 (GPT 평가)
- [ ] 퀴즈 시스템 (GPT 채점)
- [ ] 파일 제출 (ZIP, 마감일 설정)
- [ ] 강사 관리자 페이지 (퀴즈/실습 관리, 통계)
- [ ] 이메일 알림 (코멘트, 공지)

---

## 12. 추후 개발 (2차)

- [ ] ZIP 파일 자동 압축 해제 및 미리보기 (이미지/PDF/동영상)
- [ ] 실시간 푸시 알림
- [ ] 학생 간 공유/댓글
- [ ] AI 영상 생성 연동
